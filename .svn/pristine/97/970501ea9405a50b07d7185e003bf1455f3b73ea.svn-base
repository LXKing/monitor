
var renderDriver = function (url) {
    document.getElementById("shitBar").innerHTML=shitbar;
    var table = layui.table;
    var shit = "kkk";
    //第一个实例
    table.render({
        elem: '#theTable',
        url: url,
        page: true,
        cols: [
            [
                {type: 'checkbox'},
                //表头
                {field: 'id', title: 'ID', sort: true},
                {field: 'name', title: 'name', sort: true},
                {field: 'sex', title: 'sex', sort: true},
                {field: 'phone', title: 'phone', sort: true},
                {field: 'drivingLicenseNumber', title: 'drivingLicenseNumber', sort: true},
                {field: 'remark', title: 'remark', sort: true},
                {fixed: 'right', align: 'center', toolbar: '#barDemo'}

            ]
        ]
    });

    //监听表格复选框选择
    table.on('checkbox(table)', function (obj) {
        console.log(obj);
    });

    //监听工具条
    table.on('tool(table)', function (obj) {
        var data = obj.data;
        if (obj.event === 'detail') {
            layer.msg('ID：' + data.id + ' 的查看操作');
        } else if (obj.event === 'del') {
            layer.confirm('真的删除行么', function (index) {
                obj.del();
                layer.close(index);
            });
        } else if (obj.event === 'edit') {
            layer.alert('编辑行：<br>' + JSON.stringify(data))
        }
    });

    var $ = layui.$, active = {
        getCheckData: function () { //获取选中数据
            var checkStatus = table.checkStatus('idTest')
                , data = checkStatus.data;
            layer.alert(JSON.stringify(data));
        }
        , getCheckLength: function () { //获取选中数目
            var checkStatus = table.checkStatus('idTest')
                , data = checkStatus.data;
            layer.msg('选中了：' + data.length + ' 个');
        }
        , isAll: function () { //验证是否全选
            var checkStatus = table.checkStatus('idTest');
            layer.msg(checkStatus.isAll ? '全选' : '未全选')
        }
    };

    $('.demoTable .layui-btn').on('click', function () {
        var type = $(this).data('type');
        active[type] ? active[type].call(this) : '';
    });

    // SEARCH
    var $ = layui.$, active = {
        reload: function () {
            var tableReload = $('#tableReload');

            //执行重载
            table.reload('testReload', {
                page: {
                    curr: 1 //重新从第 1 页开始
                }
                , where: {
                    key: {
                        id: tableReload.val()
                    }
                }
            });
        }
    };

    $('.demoTable .layui-btn').on('click', function () {
        var type = $(this).data('type');
        active[type] ? active[type].call(this) : '';
    });

};
