<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
<%@ taglib prefix="shiro" uri="http://shiro.apache.org/tags" %>
<%@ page import="com.rayton.gps.cache.AuthorizeCache" %>
<%@ page session="false" contentType="text/html; charset=UTF-8" %>
<c:set var="ctx" value="${pageContext.request.contextPath}"></c:set>
<!DOCTYPE HTML>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>index</title>
    <link href="css/bootstrap.min.css" rel="stylesheet">

    <link rel="stylesheet" type="text/css" href="css/font-awesome.min.css">

    <script type="text/javascript" src="js/jquery.min.js"></script>
    <script type="text/javascript" src="js/bootstrap.min.js"></script>

    <link href="css/jquery.scrollbar.min.css" rel="stylesheet">

    <script type="text/javascript" src="js/jquery.scrollbar.min.js"></script>

    <link href="css/nth.tabs.min.css" rel="stylesheet">
    <script type="text/javascript" src="js/nth.tabs.min.js"></script>
    <link rel="stylesheet" type="text/css" href="./css/iconfont.css">
    <link rel="stylesheet" href="./css/common.css">
    <link rel="stylesheet" href="./css/index.css">
    <script src="js/index.js"></script>
    <script>
        // window.onload=function(){
        //     var S_w = document.documentElement.clientHeight();
        //     console.log(S_w);
        //     // window.onresize = function(){
        //     //     // var S_w = document.body.clientHeight;
        //     // }
        // }
        $(function () {
            function mmp() {
                var s_h = $(window).height()
                var top = $("#up_box").height();
                var middle = $("#mid_box").height();
                var all_H = $(window).height() - top - middle;
                $(".content_box").height(all_H);
                // console.log(all_H);
            }
            mmp();
            $(window).resize(mmp);
        })
    </script>
    <script>
        var nthTabs;
        $(function () {
            nthTabs = $("#editor-tabs").nthTabs();
            nthTabs.addTab({
                id: 'a',
                title: '在线监控',
                content: '123',
            }).setActTab("#c");
        });
    </script>
</head>

<body>
<!-- 公共头部 -->
<header id="up_box">
    <!-- 左 -->
    <div class="left_logo fl">
        <img src="./image/logodemo.png" alt="">
    </div>
    <!-- 右 -->
    <div class="right_tools fr">
        <nav>
            <ul>
                <li onClick="nthTabs.addTab({id:'012',title:'在线监控',content:'123'})">
                    <img src="./image/webwxgetmsgimg.jpg" alt="">
                    <span>在线监控</span>
                </li>
                <li onClick="nthTabs.addTab({id:'012',title:'基础数据',content:'123'})">
                    <img src="./image/webwxgetmsgimg.jpg" alt="">
                    <span>基础数据</span>
                </li>
                <li onClick="nthTabs.addTab({id:'012',title:'多车跟踪',content:'123'})">
                    <img src="./image/webwxgetmsgimg.jpg" alt="">
                    <span>多车跟踪</span>
                </li>
                <li onClick="nthTabs.addTab({id:'012',title:'统计分析',content:'123'})">
                    <img src="./image/webwxgetmsgimg.jpg" alt="">
                    <span>统计分析</span>
                </li>
                <li onClick="nthTabs.addTab({id:'012',title:'运行管理',content:'123'})">
                    <img src="./image/webwxgetmsgimg.jpg" alt="">
                    <span>运行管理</span>
                </li>
                <li onClick="nthTabs.addTab({id:'012',title:'报表管理',content:'123'})">
                    <img src="./image/webwxgetmsgimg.jpg" alt="">
                    <span>报表管理</span>
                </li>
                <li onClick="nthTabs.addTab({id:'012',title:'历史轨迹',content:'123'})">
                    <img src="./image/webwxgetmsgimg.jpg" alt="">
                    <span>历史轨迹</span>
                </li>
                <li onClick="nthTabs.addTab({id:'012',title:'信令管理',content:'123'})">
                    <img src="./image/webwxgetmsgimg.jpg" alt="">
                    <span>信令管理</span>
                </li>
                <li onClick="nthTabs.addTab({id:'012',title:'告警管理',content:'123'})">
                    <img src="./image/webwxgetmsgimg.jpg" alt="">
                    <span>告警管理</span>
                </li>
                <li onClick="nthTabs.addTab({id:'012',title:'通知管理',content:'123'})">
                    <img src="./image/webwxgetmsgimg.jpg" alt="">
                    <span>通知管理</span>
                </li>
                <li onClick="nthTabs.addTab({id:'012',title:'更多功能',content:'123'})">
                    <img src="./image/webwxgetmsgimg.jpg" alt="">
                    <span>更多功能</span>
                </li>
            </ul>
        </nav>
        <div class="user-info">
            <div class="user fl">
                <a href="javascript:void(0)">Admin</a>
                <a href="javascript:void(0)">帮助</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                <a href="javascript:void(0)">账户管理</a>
                <a href="javascript:void(0)">退出</a>
            </div>
        </div>
    </div>
    <div class="clear"></div>
</header>


<!-- 选项卡 -->
<div class="link-select" id="mid_box">
    <div class="nth-tabs" id="editor-tabs"></div>
    <!-- 使用时只需此标签，class固定,id自定义 -->
</div>
<!-- 侧边，地图，底部 -->
<div class="content_box">
    <!-- 侧边栏 -->
    <div class="car-info_box">
        <section class="car-info" id="box_left">
            <!-- <i class="iconfont icon-jiantouarrowheads3"></i> -->
            <div class="car-info-header">
                <div class="cih_small">
                                    <span>
                                        车辆列表
                                    </span>
                    <i>
                        <img src="./image/webwxgetmsgimg (1).jpg" alt="">
                    </i>
                    <span>
                                        地图列表
                                    </span>
                    <i>
                        <img src="./image/webwxgetmsgimg (2).jpg" alt="">
                    </i>
                </div>
            </div>
            <div class="car-info-search">
                <div class="cis_small">
                                <span>
                                    所属公司
                                </span>
                    <i>
                        <img src="./image/webwxgetmsgimg (4).jpg" alt="">
                    </i>
                    <span>
                                    所属车队
                                </span>
                    <i>
                        <img src="./image/webwxgetmsgimg (4).jpg" alt="">
                    </i>
                    <input type="text">
                    <i>
                        <img src="./image/webwxgetmsgimg (3).jpg" alt="">
                    </i>
                </div>

            </div>
            <div class="car-lists">
                <div class="am_header">
                    <span>车辆号</span>
                    <span>速度</span>
                    <span>里程</span>
                    <span>运行状态</span>
                </div>
            </div>

        </section>
        <!-- 侧边栏底部 -->
        <div class="car-status">
            <div class="cs_top">
                                <span>
                                    <i>
                                        <img src="./image/smallcar.png" alt="">
                                    </i>
                                    在线：2000
                                </span>
                <span>
                                    <i>
                                        <img src="./image/smallcar.png" alt="">
                                    </i>
                                    离线：11110
                                </span>
                <span>
                                    <i>
                                        <img src="./image/refresh.png" alt="">
                                    </i>
                                    刷新
                                </span>
            </div>
            <div class="cs_bottom">
                                <span>
                                    <i>
                                        <img src="./image/smallcar.png" alt="">
                                    </i>
                                    总车辆：10
                                </span>
                <span>
                                    <i>
                                        <img src="./image/smallcar.png" alt="">
                                    </i>
                                    行驶：3000
                                </span>
                <span>
                                    <i>
                                        <img src="./image/pliers.png" alt="">
                                    </i>
                                    设置
                                </span>
            </div>
        </div>
    </div>

    <section id="box_drag" style="width:0.5%;height:100%;position:absolute;left:19.9%;top:0;background-color:#fff;z-index:1000"></section>
    <!-- 地图，车辆信息 -->
    <section class="map-info" id="box_right">
        <div class="map-contents" id="box_map">map contents</div>
        <section id="box_upDown" style="width:100%;height:1%;position:absolute;left:0;top:69%;background-color:#fff;z-index:1000;">
        </section>
        <section class="mc_all" id="box_mc">
            <div class="map-car-message">
                <!-- <i class="iconfont icon-jiantou2"></i>
                <i class="iconfont icon-jiantou4"></i> -->
                <span>
                        车机状态
                    </span>
                <s>
                    <img src="./image/srtting.png" alt="">
                </s>
                <span>

                        通知。。。。。。
                    </span>
                <s>
                    <img src="./image/srtting.png" alt="">
                </s>
                <ul>
                    <li>
                        <s>
                            <img src="./image/zaixian.png" alt="">
                        </s>
                        <span>在线</span>
                    </li>
                    <li>
                        <s>
                            <img src="./image/lansedian.png" alt="">
                        </s>
                        <span>行驶</span>
                    </li>
                    <li>
                        <s>
                            <img src="./image/budingwei.png" alt="">
                        </s>
                        <span>不定位</span>
                    </li>
                    <li>
                        <s>
                            <img src="./image/lixiandian.png" alt="">
                        </s>
                        <span>离线</span>
                    </li>
                    <li>
                        <s>
                            <img src="./image/baojingdian.png" alt="">
                        </s>
                        <span>报警</span>
                    </li>
                </ul>
            </div>
            <div class="map-car-details">
                <div class="con" style="display:block">
                    <table border="1" cellpadding="0" cellspacing="0" style="overflow: scroll;">
                        <thead>
                        <tr>
                            <td>车牌</td>
                            <td>车队</td>
                            <td>时间</td>
                            <td>速度</td>
                            <td>方向</td>
                            <td>油量（O）</td>
                            <td>油量（升）</td>
                            <td>油量（%）</td>
                            <td>电平</td>
                            <td>里程</td>
                            <td>定位</td>
                            <td>Acc</td>
                            <td>地理位置</td>
                        </tr>
                        </thead>
                        <tbody id="content_data"></tbody>
                        <script src="js/arttemplate.js"></script>
                        <script id="tpl" type="text/html">
                            <% for(var i =0;i<list.length;i++) { %>
                            <tr>
                                <td><%= i+1 %></td>
                                <td><%= list[i].a %></td>
                                <td><%= list[i].b %></td>
                                <td><%= list[i].c %></td>
                                <td><%= list[i].d %></td>
                                <td><%= list[i].e %></td>
                                <td><%= list[i].f %></td>
                                <td><%= list[i].g %></td>
                                <td><%= list[i].h %></td>
                                <td><%= list[i].i %></td>
                                <td><%= list[i].j %></td>
                                <td><%= list[i].k %></td>
                                <td><%= list[i].l %></td>
                            </tr>
                            <% } %>

                        </script>

                    </table>
                    <script>
                        var data = {
                            "list": [{
                                "a": 1.0,
                                "b": 1.1,
                                "c": 1.2,
                                "d": 1.3,
                                "e": 1.4,
                                "f": 1.5,
                                "g": 1.6,
                                "h": 1.7,
                                "i": 1.8,
                                "j": 1.9,
                                "k": 2.0,
                                "l": 2.1
                            },
                                {
                                    "a": 1.0,
                                    "b": 1.1,
                                    "c": 1.2,
                                    "d": 1.3,
                                    "e": 1.4,
                                    "f": 1.5,
                                    "g": 1.6,
                                    "h": 1.7,
                                    "i": 1.8,
                                    "j": 1.9,
                                    "k": 2.0,
                                    "l": 2.1
                                },
                                {
                                    "a": 1.0,
                                    "b": 1.1,
                                    "c": 1.2,
                                    "d": 1.3,
                                    "e": 1.4,
                                    "f": 1.5,
                                    "g": 1.6,
                                    "h": 1.7,
                                    "i": 1.8,
                                    "j": 1.9,
                                    "k": 2.0,
                                    "l": 2.1
                                },
                                {
                                    "a": 1.0,
                                    "b": 1.1,
                                    "c": 1.2,
                                    "d": 1.3,
                                    "e": 1.4,
                                    "f": 1.5,
                                    "g": 1.6,
                                    "h": 1.7,
                                    "i": 1.8,
                                    "j": 1.9,
                                    "k": 2.0,
                                    "l": 2.1
                                }, {
                                    "a": 1.0,
                                    "b": 1.1,
                                    "c": 1.2,
                                    "d": 1.3,
                                    "e": 1.4,
                                    "f": 1.5,
                                    "g": 1.6,
                                    "h": 1.7,
                                    "i": 1.8,
                                    "j": 1.9,
                                    "k": 2.0,
                                    "l": 2.1
                                },
                                {
                                    "a": 1.0,
                                    "b": 1.1,
                                    "c": 1.2,
                                    "d": 1.3,
                                    "e": 1.4,
                                    "f": 1.5,
                                    "g": 1.6,
                                    "h": 1.7,
                                    "i": 1.8,
                                    "j": 1.9,
                                    "k": 2.0,
                                    "l": 2.1
                                },
                                {
                                    "a": 1.0,
                                    "b": 1.1,
                                    "c": 1.2,
                                    "d": 1.3,
                                    "e": 1.4,
                                    "f": 1.5,
                                    "g": 1.6,
                                    "h": 1.7,
                                    "i": 1.8,
                                    "j": 1.9,
                                    "k": 2.0,
                                    "l": 2.1
                                },
                                {
                                    "a": 1.0,
                                    "b": 1.1,
                                    "c": 1.2,
                                    "d": 1.3,
                                    "e": 1.4,
                                    "f": 1.5,
                                    "g": 1.6,
                                    "h": 1.7,
                                    "i": 1.8,
                                    "j": 1.9,
                                    "k": 2.0,
                                    "l": 2.1
                                },
                                {
                                    "a": 1.0,
                                    "b": 1.1,
                                    "c": 1.2,
                                    "d": 1.3,
                                    "e": 1.4,
                                    "f": 1.5,
                                    "g": 1.6,
                                    "h": 1.7,
                                    "i": 1.8,
                                    "j": 1.9,
                                    "k": 2.0,
                                    "l": 2.1
                                },{
                                    "a": 1.0,
                                    "b": 1.1,
                                    "c": 1.2,
                                    "d": 1.3,
                                    "e": 1.4,
                                    "f": 1.5,
                                    "g": 1.6,
                                    "h": 1.7,
                                    "i": 1.8,
                                    "j": 1.9,
                                    "k": 2.0,
                                    "l": 2.1
                                },
                                {
                                    "a": 1.0,
                                    "b": 1.1,
                                    "c": 1.2,
                                    "d": 1.3,
                                    "e": 1.4,
                                    "f": 1.5,
                                    "g": 1.6,
                                    "h": 1.7,
                                    "i": 1.8,
                                    "j": 1.9,
                                    "k": 2.0,
                                    "l": 2.1
                                },
                                {
                                    "a": 1.0,
                                    "b": 1.1,
                                    "c": 1.2,
                                    "d": 1.3,
                                    "e": 1.4,
                                    "f": 1.5,
                                    "g": 1.6,
                                    "h": 1.7,
                                    "i": 1.8,
                                    "j": 1.9,
                                    "k": 2.0,
                                    "l": 2.1
                                },
                                {
                                    "a": 1.0,
                                    "b": 1.1,
                                    "c": 1.2,
                                    "d": 1.3,
                                    "e": 1.4,
                                    "f": 1.5,
                                    "g": 1.6,
                                    "h": 1.7,
                                    "i": 1.8,
                                    "j": 1.9,
                                    "k": 2.0,
                                    "l": 2.1
                                },
                                {
                                    "a": 1.0,
                                    "b": 1.1,
                                    "c": 1.2,
                                    "d": 1.3,
                                    "e": 1.4,
                                    "f": 1.5,
                                    "g": 1.6,
                                    "h": 1.7,
                                    "i": 1.8,
                                    "j": 1.9,
                                    "k": 2.0,
                                    "l": 2.1
                                },
                                {
                                    "a": 1.0,
                                    "b": 1.1,
                                    "c": 1.2,
                                    "d": 1.3,
                                    "e": 1.4,
                                    "f": 1.5,
                                    "g": 1.6,
                                    "h": 1.7,
                                    "i": 1.8,
                                    "j": 1.9,
                                    "k": 2.0,
                                    "l": 2.1
                                },
                                {
                                    "a": 1.0,
                                    "b": 1.1,
                                    "c": 1.2,
                                    "d": 1.3,
                                    "e": 1.4,
                                    "f": 1.5,
                                    "g": 1.6,
                                    "h": 1.7,
                                    "i": 1.8,
                                    "j": 1.9,
                                    "k": 2.0,
                                    "l": 2.1
                                },
                                {
                                    "a": 1.0,
                                    "b": 1.1,
                                    "c": 1.2,
                                    "d": 1.3,
                                    "e": 1.4,
                                    "f": 1.5,
                                    "g": 1.6,
                                    "h": 1.7,
                                    "i": 1.8,
                                    "j": 1.9,
                                    "k": 2.0,
                                    "l": 2.1
                                },
                                {
                                    "a": 1.0,
                                    "b": 1.1,
                                    "c": 1.2,
                                    "d": 1.3,
                                    "e": 1.4,
                                    "f": 1.5,
                                    "g": 1.6,
                                    "h": 1.7,
                                    "i": 1.8,
                                    "j": 1.9,
                                    "k": 2.0,
                                    "l": 2.1
                                },
                                {
                                    "a": 1.0,
                                    "b": 1.1,
                                    "c": 1.2,
                                    "d": 1.3,
                                    "e": 1.4,
                                    "f": 1.5,
                                    "g": 1.6,
                                    "h": 1.7,
                                    "i": 1.8,
                                    "j": 1.9,
                                    "k": 2.0,
                                    "l": 2.1
                                },
                                {
                                    "a": 1.0,
                                    "b": 1.1,
                                    "c": 1.2,
                                    "d": 1.3,
                                    "e": 1.4,
                                    "f": 1.5,
                                    "g": 1.6,
                                    "h": 1.7,
                                    "i": 1.8,
                                    "j": 1.9,
                                    "k": 2.0,
                                    "l": 2.1
                                },
                                {
                                    "a": 1.0,
                                    "b": 1.1,
                                    "c": 1.2,
                                    "d": 1.3,
                                    "e": 1.4,
                                    "f": 1.5,
                                    "g": 1.6,
                                    "h": 1.7,
                                    "i": 1.8,
                                    "j": 1.9,
                                    "k": 2.0,
                                    "l": 2.1
                                },
                                {
                                    "a": 1.0,
                                    "b": 1.1,
                                    "c": 1.2,
                                    "d": 1.3,
                                    "e": 1.4,
                                    "f": 1.5,
                                    "g": 1.6,
                                    "h": 1.7,
                                    "i": 1.8,
                                    "j": 1.9,
                                    "k": 2.0,
                                    "l": 2.1
                                },
                                {
                                    "a": 1.0,
                                    "b": 1.1,
                                    "c": 1.2,
                                    "d": 1.3,
                                    "e": 1.4,
                                    "f": 1.5,
                                    "g": 1.6,
                                    "h": 1.7,
                                    "i": 1.8,
                                    "j": 1.9,
                                    "k": 2.0,
                                    "l": 2.1
                                },
                                {
                                    "a": 1.0,
                                    "b": 1.1,
                                    "c": 1.2,
                                    "d": 1.3,
                                    "e": 1.4,
                                    "f": 1.5,
                                    "g": 1.6,
                                    "h": 1.7,
                                    "i": 1.8,
                                    "j": 1.9,
                                    "k": 2.0,
                                    "l": 2.1
                                },
                                {
                                    "a": 1.0,
                                    "b": 1.1,
                                    "c": 1.2,
                                    "d": 1.3,
                                    "e": 1.4,
                                    "f": 1.5,
                                    "g": 1.6,
                                    "h": 1.7,
                                    "i": 1.8,
                                    "j": 1.9,
                                    "k": 2.0,
                                    "l": 2.1
                                },
                                {
                                    "a": 1.0,
                                    "b": 1.1,
                                    "c": 1.2,
                                    "d": 1.3,
                                    "e": 1.4,
                                    "f": 1.5,
                                    "g": 1.6,
                                    "h": 1.7,
                                    "i": 1.8,
                                    "j": 1.9,
                                    "k": 2.0,
                                    "l": 2.1
                                },
                                {
                                    "a": 1.0,
                                    "b": 1.1,
                                    "c": 1.2,
                                    "d": 1.3,
                                    "e": 1.4,
                                    "f": 1.5,
                                    "g": 1.6,
                                    "h": 1.7,
                                    "i": 1.8,
                                    "j": 1.9,
                                    "k": 2.0,
                                    "l": 2.1
                                },
                                {
                                    "a": 1.0,
                                    "b": 1.1,
                                    "c": 1.2,
                                    "d": 1.3,
                                    "e": 1.4,
                                    "f": 1.5,
                                    "g": 1.6,
                                    "h": 1.7,
                                    "i": 1.8,
                                    "j": 1.9,
                                    "k": 2.0,
                                    "l": 2.1
                                }]
                        };
                        var html = template("tpl", data);
                        $('#content_data').html(html);
                    </script>
                </div>
                <div class="con">two</div>
                <div class="con">three</div>
                <div class="con">four</div>
            </div>
            <div class="map-car-info">
                <a href="javascript:;" class="current">车辆信息</a>
                <a href="javascript:;">告警信号</a>
                <a href="javascript:;">车辆信息</a>
                <a href="javascript:;">告警信号</a>
            </div>
        </section>
    </section>
    <div class="clear"></div>
</div>
<script>
    // map_info向左
    $(function () {
        var x = '';
        var y = '';
        var boxDrag = $("#box_drag")[0];
        var boxLeft = $("#box_left")[0];
        var boxRight = $("#box_right")[0];
        if(!true){

        }
        $("#box_drag").mousedown(function (e) {
            var iEvent = e || event;
            var boxRightWidth = boxRight.offsetWidth;
            var boxDragClientLeft = iEvent.clientX;
            var boxDragWidth = boxDrag.offsetWidth;
            var screenWidth = boxRightWidth + boxDragClientLeft + boxDragWidth;
            if (iEvent.clientX < boxDrag.offsetLeft + 10) {
                X = 'left';
                boxDrag.style.cursor = 'ew-resize';
            }
            $(document).mousemove(function (e) {
                var iEvent = e || event;
                if(iEvent.clientX < 0 || iEvent.clientX > window.innerWidth-10){
                    return;
                }
                if (X == 'left') {
                    console.log("screenwidth:" + screenWidth);
                    boxRight.style.width = boxRightWidth - (iEvent.clientX - boxDragClientLeft) - boxDragWidth + 'px';
                    boxRight.style.left = screenWidth - boxRight.offsetWidth  + 'px';
                    boxLeft.style.width = screenWidth - (boxRightWidth - (iEvent.clientX - boxDragClientLeft)) + 'px';
                    boxDrag.style.left = screenWidth - boxRight.offsetWidth - boxDragWidth + 'px';
                    console.log('iEvent.clientX:'+iEvent.clientX);
                }
            })

            $(document).mouseup(function () {
                $(document).off("mousedown mousemove");

            })
            return false;
        })

    });
    // map_contents向下
    $(function () {
        var mapContent = $("#box_map")[0];
        var mapDrag = $("#box_upDown")[0];
        var mapStatus = $(".mc_all")[0];
        $("#box_upDown").mousedown(function (e) {
            var iEvent = e || event;
            var mapContentHeight = mapContent.offsetHeight;
            var mapDragHeight = mapDrag.offsetHeight;
            var mapStatusHeight = mapStatus.offsetHeight;
            var screenHeight = mapContentHeight + mapDragHeight + mapStatusHeight;
            mapDrag.style.cursor = 'ew-resize';
            $(document).mousemove(function (e) {
                var iEvent = e || event;
                if (iEvent.clientY < 119 || iEvent.clientY >  window.innerHeight-26) {
                    return;
                }
                mapContent.style.height = iEvent.clientY - 120 + "px";
                mapDrag.style.top = iEvent.clientY - 120 + "px";
                mapStatus.style.top = iEvent.clientY - 120 + "px";
                mapStatus.style.height = screenHeight - (iEvent.clientY - 120) + 'px';
                console.log('iEvent.clientY:'+iEvent.clientY);
            })
            $(document).mouseup(function () {
                $(document).off("mousedown mousemove");
            })
            return false;
        })
    });

</script>


</body>

</html>