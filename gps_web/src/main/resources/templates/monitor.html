<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>在线监控</title>
    <link th:href="@{/static/js/bootstrap/css/bootstrap-table.css}" rel="stylesheet"/>
    <link th:href="@{/static/css/cg/bootstrap.min.css}" rel="stylesheet">
    <!--<link th:href="@{/static/css/zTreeStyle.css}" rel="stylesheet" />-->

    <link th:href="@{/static/css/tree/metroStyle.css}" rel="stylesheet"/>
    <!--<link href="https://cdn.bootcss.com/zTree.v3/3.5.29/css/zTreeStyle/zTreeStyle.min.css" rel="stylesheet">-->
    <link th:href="@{/static/lib/tabular_ztree.css}" rel="stylesheet"/>

    <link rel="stylesheet" th:href="@{/static/lib/layui/css/layui.css}">
    <link rel="stylesheet" type="text/css" th:href="@{/static/css/cg/iconfont.css}">
    <link rel="stylesheet" th:href="@{/static/css/cg/common.css}">
    <!--<link rel="stylesheet" th:href="@{/static/css/cg/index.css}">-->
    <link rel="stylesheet" th:href="@{/static/css/index_l.css}">

    <link rel="stylesheet" th:href="@{/static/css/center/layercolor.css}">

    <link rel="stylesheet" th:href="@{/static/dc_file/css/monitor_1.css}">


    <link rel="stylesheet" href="http://api.map.baidu.com/library/DrawingManager/1.4/src/DrawingManager_min.css">


    <style>

        body {
            overflow: hidden;
        }

        /*::-webkit-scrollbar {*/
            /*width: 4px;*/
            /*height: 8px;*/
            /*background-color: transparent;*/
        /*}*/

        /*::-webkit-scrollbar-track {*/
            /*background-color: transparent;*/
        /*}*/

        /*::-webkit-scrollbar-thumb {*/
            /*background-color: rgba(0, 0, 0, .1);*/
        /*}*/

        .layui-laypage .layui-laypage-curr .layui-laypage-em {
            background-color: #0488d1;
        }

        .ztree li {
            line-height: 0;
        }


        .layui-input-block {
             margin-left: 0;
            min-height: 36px;
        }
        .layui-form.ooooo div {
            padding: 8px;
        }
    </style>


</head>

<body>

<!--打印地图-->
<div style="display: none;width: 100%;height: 100%;background: #fff;    z-index: 999999;"
     id="printmap">

</div>
<!-- 侧边栏 -->
<div class="car-info_box">
    <!-- 车辆信息上部分 -->
    <section class="car-info" id="box_left">
        <!-- <i class="iconfont icon-jiantouarrowheads3"></i> -->
        <!-- 车辆信息头部 -->
        <div class="car-info-header">
            <div class="cih_small">
                            <span class="current_cm">
                                车辆列表
                            </span>
                <span>
                                地图列表
                            </span>
                <span>
                                关注
                            </span>
            </div>
        </div>
        <!-- 车辆信息搜索栏 -->
        <!-- 车辆信息列表 -->
        <div class="dl dis_list" style="display: block">
            <div class="car-info-search">
                <div class="cis_small">
                    <div class="ciss_l fl" style="background-color: #fff">
                        <form class="layui-form form_font" action="" style="color: #c9c9c9">
                            <select lay-filter="test" name="Company" lay-verify="" id="Company">
                                <option value="1">所属车队</option>
                            </select>
                        </form>
                    </div>
                    <div class="ciss_m fl" style="background-color: #fff">
                        <form class="layui-form form_font" action="" style="color: #c9c9c9">
                            <select name="team" lay-verify="" id="team" lay-filter="teamss">
                                <option value="1">所属公司</option>
                            </select>
                        </form>
                    </div>
                    <div class="ciss_r fl" style="color: #c9c9c9;">
                        <input type="text" id="textscresh">
                    </div>
                </div>
            </div>
            <div class="car-lists" >
                <!--<div class="cl_info">-->

                <!--<div class="tree_class">-->
                <!--<div class="layer">-->
                <!--<div id="tableMain">-->
                <ul id="dataTree" class="ztree"  style="position:absolute;" >
                </ul>
                <!--</div>-->
                <!--</div>-->
                <!--</div>-->
                <!--</div>-->

                <div id="rMenu">
                    <a href="#" class="list-group-item" type="m_expand">功能1</a>
                    <a href="#" class="list-group-item" type="m_expandSon">功能2</a>
                    <a href="#" class="list-group-item" type="m_collapse">功能3</a>
                    <a href="#" class="list-group-item" type="m_expandAll">功能4</a>
                    <a href="#" class="list-group-item" type="m_collapseAll">功能5</a>
                </div>
            </div>
        </div>
        <div class="map_list dl dis_list" style="overflow: auto;">
            <div class="tree_class">
                <div class="layer">
                    <div id="tableMaindis" style="text-align: center;color: red">
                        <ul id="dataTreedis" class="ztreemap"></ul>

                    </div>
                </div>
            </div>
        </div>

    </section>
    <!-- 侧边栏底部 -->
    <div class="car-status" id="car-status">
        <div class="cs_top">
        <span onclick="countcar()">
            总车辆:0
        </span>
            <span>
            在线率:0
        </span>
            <span onclick="hidden_bottom()">
            隐藏
        </span>
        </div>
        <div class="cs_middle">
        <span onclick="Onlinecar()">
            在线:0
        </span>
            <span onclick="offlinecar()">
            离线:0
        </span>
            <span onclick="refresh()">
            刷新
        </span>
        </div>
        <div class="cs_bottom">
                        <span>
                            任务:0
                        </span>
            <span>
                            行驶:0
                        </span>
            <span id="showSetting">
                            设置
                        </span>
        </div>
    </div>
</div>

<!-- 地图，车辆信息 -->
<section class="map-info" id="box_right" style="right: 0">
    <!--左右拖拉-->
    <section id="box_drag">
    </section>
    <div class="map-contents" id="box_map">
        <!--倒计时刷新-->

        <!--startprint-->
        <div id="locateMap">
        </div>
        <!--endprint-->
        <div class="map_uldiv">
            <nav class="nav_ul">
                <ul>
                    <li onclick="areacar()">
                        <div>
                            <input type="button" class="" value="区域查车">
                            <img th:src="@{/static/image/pointimage/whitecar.png}">
                            <img th:src="@{/static/image/pointimage/whilev.png}">
                            <span class="nav_ul_line"></span>
                        </div>
                    </li>
                    <li onclick="default_view()">
                        <div>
                            <input type="button" class="" value="默认视野">
                            <img th:src="@{/static/image/pointimage/default_view.png}">
                            <span class="nav_ul_line"></span>
                        </div>
                    </li>
                    <li onclick="Refreshmap()">
                        <div>
                            <input type="button" class="" value="刷新地图">
                            <img th:src="@{/static/image/pointimage/refresh.png}">
                            <span class="nav_ul_line"></span>
                        </div>
                    </li>
                    <li onclick="Full_screen()">
                        <div>
                            <input type="button" class="" value="全屏">
                            <img th:src="@{/static/image/pointimage/Full_screen.png}">
                            <span class="nav_ul_line"></span>
                        </div>
                    </li>
                    <li onclick="toolnav()">
                        <div>
                            <input type="button" class="" value="工具">
                            <img th:src="@{/static/image/pointimage/whiletool.png}">
                            <img th:src="@{/static/image/pointimage/whilev.png}">
                            <ul class="ul_tool_li" id="toolnav_ul">
                                <li onclick="amplification()">
                                    放大
                                </li>
                                <li onclick="narrow()">
                                    缩小
                                </li>
                                <li onclick="ranging()">
                                    测距
                                </li>
                                <li onclick="tool()">
                                    清除
                                </li>
                                <li onclick="Uploadvision()">
                                    上传视野
                                </li>
                            </ul>
                            <span class="nav_ul_line"></span>
                        </div>
                    </li>
                    <li>
                        <div>
                            <input type="button" class="" value="设置">
                            <img th:src="@{/static/image/pointimage/srtting.png}">
                            <span class="nav_ul_line"></span>
                        </div>
                    </li>
                    <li onclick="printmap()">
                        <div>
                            <input type="button" class="" value="打印地图">
                            <img th:src="@{/static/image/pointimage/whileprint.png}">
                            <span class="nav_ul_line"></span>
                        </div>
                    </li>
                    <li onclick="Locationservice()">
                        <div>
                            <input type="button" class="" value="位置服务">
                            <img th:src="@{/static/image/pointimage/wzfw.png}">
                            <img th:src="@{/static/image/pointimage/whilev.png}">
                            <span class="nav_ul_line"></span>
                        </div>
                    </li>
                    <li onclick="LushuorthJS()">
                        <div>
                            <input type="button" class="" value="预留">
                            <span class="nav_ul_line"></span>
                        </div>
                    </li>
                    <li onclick="mapnavigationshrinkage()">
                        <img th:src="@{/static/image/pointimage/xiaohungdeng.png}" id="map_shrinkage">
                    </li>
                </ul>
            </nav>
        </div>
        <!--区域车辆-->
        <div class="panel panel-default" style="display: none;" id="panelqucar" draggable=true>
            <div class="panel-heading">
                            <span style="margin-left: 10px;    line-height: 2;font-size: 12px;">
                                查看区域车辆
                                <img th:src="@{/static/image/pointimage/whitecar.png}"
                                     style="width: 16px;height: 16px">
                            </span>

                <span style="float:right;padding-right: 2px;" onclick="penlarareacar()"><i>X</i></span>
                <span style="float:right;" onclick="qucarbigger()"><img
                        th:src="@{/static/image/pointimage/kuang.png}" style="width: 60%"></span>
            </div>
            <div class="panel-body">
                <ul id="myTab" class="nav">
                    <li class="active">
                        <a href="#home" data-toggle="tab">
                            全部
                        </a>
                    </li>
                    <li><a href="#online" data-toggle="tab">在线</a></li>
                    <li><a href="#offline" data-toggle="tab">离线</a></li>
                </ul>
                <div id="myTabContent" class="tab-content">
                    <div class="tab-pane fade in active" id="home">
                        <!--头-->
                        <div class="cissqucar" style="background-color: #fff">
                            <form class="layui-form form_font Tab_spanone">
                                <div>
                                    <select name="Companypanelqucar" lay-verify="" id="Companypanelqucar"
                                            lay-filter="Companypanelqucarlay">
                                        <option value="1">所属公司</option>
                                    </select>

                                </div>
                            </form>
                            <div style="color: #c9c9c9;display: inline-block;">
                                <input type="text" id="textscreshcar" placeholder="车牌号">
                            </div>
                        </div>
                        <!--表格-->
                        <div class="tab_Table">
                            <table class="table table-condensed table-bordered table-striped"
                                   data-classes="table-no-bordered" id="finishingTask" data-toggle="table"
                                   border="0" cellpadding="0" cellspacing="0">
                                <thead style="text-align: center;color: #969696 ">
                                <tr>
                                    <th data-field="id" style="display: none" class="noneid">id</th>
                                    <th data-field="na">车牌号</th>
                                    <th data-field="sp">车速</th>
                                    <th data-field="m">里程</th>
                                    <th data-field="gt">定位时间</th>
                                    <th data-field="dn">设备号</th>
                                    <th data-field="oil">油量</th>
                                    <th>操作</th>
                                </tr>
                                </thead>
                                <tbody id="datatbody">
                                <script id="datatbodytql" type="text/html">
                                    {{each list as value i}}
                                    <tr>
                                        <td> {{value.na}}</td>
                                        <td>{{value.sp}}</td>
                                        <td> {{value.m}}</td>
                                        <td>{{value.gt}}</td>
                                        <td>{{ value.dn}}</td>
                                        <td> {{value.oil}}</td>
                                    </tr>
                                    {{/each}}
                                </script>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <div class="tab-pane fade" id="online">

                        <!--头-->
                        <div class="cissqucar" style="background-color: #fff">
                            <form class="layui-form form_font Tab_spanone">
                                <div>
                                    <select name="Companononline" lay-verify="" id="Companononline"
                                            lay-filter="Companononlinelay">
                                        <option value="1">所属公司</option>
                                    </select>

                                </div>
                            </form>
                            <div style="color: #c9c9c9;display: inline-block;">
                                <input type="text" id="textscreshcaronline" placeholder="车牌号">
                            </div>
                        </div>
                        <!--表格-->
                        <div class="tab_Table">
                            <table class="table table-condensed table-bordered table-striped"
                                   data-classes="table-no-bordered" id="finishingTaskonline"
                                   data-toggle="table"
                                   border="0" cellpadding="0" cellspacing="0">
                                <thead style="text-align: left;color: #969696 ">
                                <tr>
                                    <th data-field="id" style="display: none" class="noneid">id</th>
                                    <th data-field="na">车牌号</th>
                                    <th data-field="sp">车速</th>
                                    <th data-field="m">里程</th>
                                    <th data-field="gt">定位时间</th>
                                    <th data-field="dn">设备号</th>
                                    <th data-field="oil">油量</th>
                                    <th>操作</th>

                                </tr>
                                </thead>
                                <tbodey id="datatbodyonline">
                                    <script id="datatbodytqlonline" type="text/html">
                                        {{each list as value i}}
                                        <tr>
                                            <td> {{value.na}}</td>
                                            <td>{{value.sp}}</td>
                                            <td> {{value.m}}</td>
                                            <td>{{value.gt}}</td>
                                            <td>{{ value.dn}}</td>
                                            <td> {{value.oil}}</td>
                                        </tr>
                                        {{/each}}
                                    </script>
                                </tbodey>
                            </table>
                        </div>
                    </div>
                    <div class="tab-pane fade" id="offline">
                        <!--头-->

                        <div class="cissqucar" style="background-color: #fff">
                            <form class="layui-form form_font Tab_spanone">
                                <div>
                                    <select name="Companonoffline" lay-verify="" id="Companonoffline"
                                            lay-filter="Companonofflinelay">
                                        <option value="1">所属公司</option>
                                    </select>

                                </div>
                            </form>
                            <div style="color: #c9c9c9;display: inline-block;">
                                <input type="text" id="textscreshcaroffline" placeholder="车牌号">
                            </div>
                        </div>

                        <!--表格-->
                        <div class="tab_Table">
                            <table class="table table-condensed table-bordered table-striped"
                                   data-classes="table-no-bordered" id="finishingTaskoffline"
                                   data-toggle="table" border="0" cellpadding="0" cellspacing="0">
                                <thead style="text-align: left;color: #969696 ">
                                <tr>
                                    <th data-field="id" style="display: none" class="noneid">id</th>
                                    <th data-field="na">车牌号</th>
                                    <th data-field="sp">车速</th>
                                    <th data-field="m">里程</th>
                                    <th data-field="gt">定位时间</th>
                                    <th data-field="dn">设备号</th>
                                    <th data-field="oil">油量</th>
                                    <th>操作</th>
                                </tr>
                                </thead>
                                <tbodey id="datatbodyoffline">
                                    <script id="datatbodytqloffline" type="text/html">
                                        {{each list as value i}}
                                        <tr>
                                            <td> {{value.na}}</td>
                                            <td>{{value.sp}}</td>
                                            <td> {{value.m}}</td>
                                            <td>{{value.gt}}</td>
                                            <td>{{ value.dn}}</td>
                                            <td> {{value.oil}}</td>
                                        </tr>
                                        {{/each}}
                                    </script>
                                </tbodey>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!--位置服务-->
        <div class="Locat panel-primary"
             style=" display: none;  border: 1px solid rgb(2, 138, 214);"
             id="Locationservice" draggable=true>
            <div class="panel-heading">
                            <span style="margin-left: 10px;    line-height: 2;font-size: 12px;">
                               位置服务
                            </span>
                <span style="float:right;" onclick="Locatclose()"><i>X</i></span>
                <span style="float:right;" onclick="Locationservice()"><i
                        class="fa fa-close tab-close"></i></span>
            </div>
            <div class="panel-body">
                <ul id="myTabLocat" class="nav">
                    <li class="active">
                        <a href="#league_mark" data-toggle="tab">
                            共联标注点
                        </a>
                    </li>
                    <li><a href="#Shared" data-toggle="tab">共享标注点</a></li>
                    <li><a href="#mapsearch" data-toggle="tab">地图搜索</a></li>
                    <li><a href="#City_navigation" data-toggle="tab">城市导航</a></li>
                </ul>
                <div id="myTabLoacat" class="tab-content">
                    <div class="tab-pane fade in active" id="league_mark">
                        <div>
                                        <span class="Tab_spanonelocat">
                              <select lay-filter="Companonlocatlay" name="Companonlocat"
                                      lay-verify=""
                                      id="Companonlocat">
                                        <option value="1">所属车队</option>
                             </select>
                            </span>
                            <span>
                                      <input type="text" class="" id="textscreshlocat"
                                             placeholder="名称"/>
                                  </span>
                            <button class="btn   btn-success btn-xs" onclick="markserver()">
                                标注
                            </button>
                        </div>
                        <table class="tableLocal">
                            <thead>
                            <th>
                                <div class="kouspan">
                                </div>
                            </th>
                            <th>
                                名称
                            </th>
                            <th>
                                类型
                            </th>
                            </thead>
                            <tbody id="locat_Data">
                            <script th:src="@{static/js/arttemplate.js}"></script>
                            <script id="tpllocat" type="text/html">
                                {{each list as value i}}
                                <tr onclick="locatpoint('{{value.id}}','{{value.lng}}','{{value.alt}}')">
                                    <td style="visibility: hidden"> {{value.id}}</td>
                                    <td> {{value.showName}}</td>
                                    <td> 酒店</td>
                                </tr>
                                {{/each}}
                            </script>
                            </tbody>
                        </table>
                    </div>
                    <div class="tab-pane fade" id="Shared">
                        该功能正在开发中
                    </div>
                    <div class="tab-pane fade" id="mapsearch">
                        该功能正在开发中
                    </div>
                    <div class="tab-pane fade" id="City_navigation">
                        该功能正在开发中
                    </div>
                </div>
            </div>
        </div>
    </div>
    <section id="box_upDown">
    </section>
    <section class="mc_all" id="box_mc">
        <div class="map-car-message">
            <!-- <i class="iconfont icon-jiantou2"></i>
                <i class="iconfont icon-jiantou4"></i> -->
            <div class="mcm_1 fl">
                            <span>
                                设置
                            </span>
                <!-- <img src="./image/shezhi.png" alt=""> -->
            </div>
            <div class="mcm_2 fl">
                <!-- <img src="./image/laba.png" alt=""> -->
                <span>
                                通知
                            </span>
            </div>
            <div class="mcm_3 fr">
                <span>在线</span>
                <span>行驶</span>
                <span>不定位</span>
                <span>离线</span>
                <span>报警</span>
                <span>异常</span>
            </div>
        </div>
        <div class="map-car-details">
            <div class="con" style="display:block">
                <table border="0" cellpadding="0" cellspacing="0" style="overflow: scroll;">
                    <thead>
                    <tr>
                        <td>车牌</td>
                        <td>车队</td>
                        <td>服务时间</td>
                        <td>定位时间</td>
                        <td>速度</td>
                        <td>方向</td>
                        <!--<td>油量（O）</td>
                <td>油量（升）</td>
                <td>油量（%）</td>
                <td>电平</td>-->
                        <td>里程</td>
                        <!--<td>定位</td>
                <td>Acc</td>-->
                        <td>地理位置</td>
                    </tr>
                    </thead>
                    <tbody id="content_data">
                    <script th:src="@{static/js/arttemplate.js}"></script>
                    <!--修改这里-->
                    <script id="tpl" type="text/html">
                        {{each list as value i}}
                        <tr onclick="tables('{{value.id}}',this)">
                            <td> {{value.na}}</td>
                            <td>{{value.team}}</td>
                            <td> {{value.st}}</td>
                            <td> {{value.gt}}</td>
                            <td>{{value.sp}}km/h</td>
                            <td> {{value.d}}</td>
                            <td>{{ value.m}}km</td>
                            <td id="geographical"><span
                                    class="locatNamejingwei">经度:{{value.lng}},纬度:{{value.lat}}</span>
                                <span class="locatName">{{value.locatName}}</span></td>
                        </tr>
                        {{/each}}
                    </script>
                    </tbody>
                </table>
            </div>
            <div class="con">未授权</div>
            <div class="con">未授权</div>
            <div class="con">
                <table id="plsFuckMe" lay-filter="plsFuckMe" lay-data="{id: 'plsFuckMe'}" lay-size="sm"
                       lay-skin="nob" style="    display: block;"></table>
            </div>
        </div>
        <div class="map-car-info" id="bottom_box">
            <span class="current">车机状态</span>
            <span>告警信号</span>
            <span>回放信息</span>
            <span id="wwwtttff">即时消息</span>
        </div>
    </section>
</section>
<div class="clear"></div>

</body>

<script th:src="@{/static/gpsparser.js}"></script>
<script th:src="@{/static/js/jquery.min.js}"></script>
<script th:src="@{/static/js/bootstrap/js/bootstrap-table.js}"></script>


<!--<script th:src="@{/static/js/jquery/jquery.ztree.core-3.5.min.js}"></script>-->
<!--<script th:src="@{/static/js/jquery/jquery.ztree.exedit.js}"></script>-->
<!--<script th:src="@{/static/js/jquery/jquery.ztree.excheck-3.5.js}"></script>-->

<script src="https://cdn.bootcss.com/zTree.v3/3.5.29/js/jquery.ztree.all.min.js"></script>

<script src="http://api.map.baidu.com/api?v=2.0&ak=Y2TqMdQvIRuGGW83xP2kd8LR7Y5SAplh"></script>
<script src="http://api.map.baidu.com/library/LuShu/1.2/src/LuShu_min.js"></script>
<script src="http://api.map.baidu.com/library/DistanceTool/1.2/src/DistanceTool_min.js"></script>
<script th:src="@{static/lib/layui/layui.all.js}"></script>
<script th:src="@{/static/js/bootstrap.min.js}"></script>
<script th:src="@{/static/dc_file/js/index_.js}"></script>
<script th:src="@{/static/webmap.js}"></script>
<script th:src="@{/static/dc_file/js/locate.js}"></script>
<script th:src="@{/static/dc_file/js/tab.js}"></script>
<script th:src="@{/static/js/tablecolor.js}"></script>
<script th:src="@{/static/js/Print.js}"></script>
<script th:src="@{/static/lib/tabular_ztree.js}"></script>

<!--<script th:src="@{/static/js/center/common.js}"></script>-->
<script th:src="@{/static/js/center/dateutils.js}"></script>


<script th:src="@{/static/baseinfo/ins.js}"></script>


<script type="text/javascript" th:src="@{/static/js/bootstrap.min.js}"></script>


<script src="http://api.map.baidu.com/library/DrawingManager/1.4/src/DrawingManager_min.js"
        type="text/javascript"></script>


<script>

    if (window.top !== window.self) {


        console.log("mmmp")
    }

</script>

<script>
    $(".iplay").click(function (e) {
        e.stopPropagation();
        console.log(123);
    })

    function formatTimeMin(date) {
        var year = date.getFullYear();
        var month = date.getMonth(), month = month < 10 ? '0' + month : month;
        var day = date.getDate(), day = day < 10 ? '0' + day : day;
        return year + '-' + month + '-' + day;
    }

    function formatTime(date) {
        var year = date.getFullYear();
        var month = date.getMonth() + 1, month = month < 10 ? '0' + month : month;
        var day = date.getDate() + 1, day = day < 10 ? '0' + day : day;
        return year + '-' + month + '-' + day;
    }

    function cnmmmmm() {

        $.ajax({
            url: "/locate/groupVehicles", //请求地址

            data: {
                force: true
            },
            type: "post", //请求方式
            async: false, //是否异步请求
            success: function (res) { //如何发送成功

                var data = [];


                for (var a of res) {
                    if (a.dn === undefined) {
                        continue;
                    }
                    data.push(a.dn);
                }
                var fffffff = [];

                // for (var ddd of data) {
                // if (ddd === undefined) continue;
                // console.log(ddd);
                $.ajax({
                    url: "../instruct/queryArr",
                    type: "POST",
                    data: {
                        deviceNumber: data,
                        // start: '2015-02-02 00:00:00',
                        // end: '2015-02-02 00:00:00',
                        pageIndex: 1 //页码的参数名称，默认：page
                        , pageSize: 999, //每页数据量的参数名，默认：limit
                        start: formatTimeMin(new Date()),
                        end: formatTime(new Date()),
                    },
                    traditional: true,
                    async: false,
                    success: function (res) {
                        Array.prototype.push.apply(fffffff, res.rows);
                        // fffffff.concat(res.rows);
                    }
                });
                // }

                console.log(fffffff)
                var table = layui.table;

                table.render({
                    id: 'plsFuckMe',
                    elem: '#plsFuckMe',
                    data: fffffff,
                    page: true,
                    cellMinWidth: 150,
                    method: "POST",
                    cols: [
                        [

                            {field: 'deviceNumber', title: '设备号', sort: true, align: 'left'},
                            {field: 'plateNumber', title: '车牌号', sort: true, align: 'left'},
                            {field: 'sendTime', title: '时间', sort: true, align: 'left'},
                            {field: 'name', title: '命令', sort: true, align: 'left'},
                            {field: 'result', title: '结果', sort: true, align: 'left'},

                        ]
                    ],
                    skin: "nob",
                    size: "sm",

                });
            }
        });

    }

    $(function () {

        $("#wwwtttff").on("click", function () {
            cnmmmmm();
        });

    });


</script>


<script>
    // layui.use('form', function () {
    //     var form = layui.form;
    //     form.on('checkbox(focus)', function (data) {
    //         console.log(data.elem); //得到checkbox原始DOM对象
    //         console.log(data.elem.checked); //是否被选中，true或者false
    //         console.log(data.value); //复选框value值，也可以通过data.elem.value得到
    //         console.log(data.othis); //得到美化后的DOM对象
    //     });
    //
    //     form.on('checkbox(show)', function (data) {
    //         console.log(data.elem); //得到checkbox原始DOM对象
    //         console.log(data.elem.checked); //是否被选中，true或者false
    //         console.log(data.value); //复选框value值，也可以通过data.elem.value得到
    //         console.log(data.othis); //得到美化后的DOM对象
    //     });
    //     //各种基于事件的操作，下面会有进一步介绍
    // });


    var mmp = `

<form  class="layui-form ooooo"  style=" color: #0f0f0f;" lay-filter="focus">
    <div    >
       关注车辆显示设置

    </div>



  <div class="layui-input-block">
            <input type="checkbox" name="dn"  id="dn"  value="dn" lay-skin="primary" title="车牌号"   lay-filter="dn">
             <input type="checkbox" name="inum"  id="inum"  value="inum" lay-skin="primary" title="自编号"  lay-filter="inum">
             <input type="checkbox" name="sp"  id="sp" value="sp" lay-skin="primary" title="速度"   lay-filter="sp">
             <input type="checkbox" name="m"  id="m" value="m"  lay-skin="primary" title="里程"   lay-filter="m">
             <input type="checkbox" name="driname"  id="driname" value="driname" lay-skin="primary" title="司机姓名"    lay-filter="driname">
             <input type="checkbox" name="mission"   id="mission"  value="mission" lay-skin="primary" title="任务状态"    lay-filter="mission">
             <input type="checkbox" name="shop" id="shop" value="shop"  lay-skin="primary" title="服务网点"    lay-filter="shop">
        </div>



</form >
<form  class="layui-form ooooo"  style=" color: #0f0f0f;" lay-filter="show">
    <div   >
      树形图列表显示设置

    </div>


  <div class="layui-input-block">
    <input type="checkbox" name="showWTF"  id="showWTF"   value="showWTF" lay-skin="primary" title="显示集团"  lay-filter="showWTF">
            <input type="checkbox" name="showCom"  id="showCom"  value="showCom" lay-skin="primary" title="显示公司"    lay-filter="showCom">
             <input type="checkbox" name="showCarG"   id="showCarG"  value="showCarG" lay-skin="primary" title="显示车队"    lay-filter="showCarG">


        </div>


</form >
 `;


    window.showArr = ["showCom", "showCarG", "showCar","showWTF"];
    window.treeC = ["dn", "inum", "sp", "m","mission"];


    function unique(arr) {
        var res = [];
        var json = {};
        for (var i = 0; i < arr.length; i++) {
            if (!json[arr[i]]) {
                res.push(arr[i]);
                json[arr[i]] = 1;
            }
        }
        return res;
    }


    function removeWithoutCopy(arr, id) {
        for (var i = arr.length - 1; i >= 0; i--) {
            if (arr[i] === id) {
                arr.splice(i, 1);
            }
        }
        return arr;
    }


    // $("#showSetting").click(function () {
    //     showSetting();
    // });

    $("#showSetting").on("click", function () {
        var kkk = layer.open({
            type: 1 //Page层类型
            , content: mmp
            , shade: 0.6 //遮罩透明度

            , anim: 0 //0-6的动画形式，-1不开启
            , area: ['300px', '400px']
            , btn: ['确定', '取消'] //只是为了演示
            , yes: function () {
                console.log("no")

                refresh();

                layer.closeAll();
            }
            , btn2: function () {
                layer.close(kkk);
            },

            success: function (layero, index) {

                var form = layui.form;

                for (var jjjo of window.treeC) {

                    var mmo = "#" + jjjo;
                    jQuery(mmo).prop("checked", true);
                    // console.warn((mmo))

                }

                for (var lllo of window.showArr) {

                    var sssssss = "#" + lllo;
                    jQuery(sssssss).prop("checked", true);
                    console.warn((sssssss))

                }

                form.render();


                form.on('checkbox(dn)', function (data) {

                    layer.msg("不可取消");
                    jQuery(data.elem).prop("checked", true);
                    form.render();
                    return;
                    console.log(data.elem); //得到checkbox原始DOM对象
                    console.log(data.elem.checked); //是否被选中，true或者false
                    console.log(data.value); //复选框value值，也可以通过data.elem.value得到
                    console.log(data.othis); //得到美化后的DOM对象

                    if (data.elem.checked) {
                        treeC.push(data.value)
                    } else {
                        removeWithoutCopy(treeC, data.value)
                    }
                    console.log(treeC)


                });
                form.on('checkbox(inum)', function (data) {

                    if (data.elem.checked) {
                        treeC.push(data.value)
                    } else {
                        removeWithoutCopy(treeC, data.value)
                    }
                    console.log(treeC)

                });
                form.on('checkbox(sp)', function (data) {
                    layer.msg("不可取消");
                    jQuery(data.elem).prop("checked", true);
                    form.render();
                    return;
                    if (data.elem.checked) {
                        treeC.push(data.value)
                    } else {
                        removeWithoutCopy(treeC, data.value)
                    }
                    console.log(treeC)
                });
                form.on('checkbox(m)', function (data) {

                    if (data.elem.checked) {
                        treeC.push(data.value)
                    } else {
                        removeWithoutCopy(treeC, data.value)
                    }
                    console.log(treeC)
                });
                form.on('checkbox(driname)', function (data) {

                    if (data.elem.checked) {
                        treeC.push(data.value)
                    } else {
                        removeWithoutCopy(treeC, data.value)
                    }
                    console.log(treeC)
                });
                form.on('checkbox(mission)', function (data) {

                    if (data.elem.checked) {
                        treeC.push(data.value)
                    } else {
                        removeWithoutCopy(treeC, data.value)
                    }
                    console.log(treeC)
                });


                form.on('checkbox(shop)', function (data) {
                    if (data.elem.checked) {
                        treeC.push(data.value)
                    } else {
                        removeWithoutCopy(treeC, data.value)
                    }
                    console.log(treeC)
                });


                form.on('checkbox(showCom)', function (data) {
                    if (data.elem.checked) {
                        showArr.push(data.value)
                    } else {
                        removeWithoutCopy(showArr, data.value)
                    }
                    console.warn(showArr)
                });
                form.on('checkbox(showCarG)', function (data) {
                    if (data.elem.checked) {
                        showArr.push(data.value)
                    } else {
                        removeWithoutCopy(showArr, data.value)
                    }
                    console.warn(showArr)
                });
                form.on('checkbox(showCar)', function (data) {
                    if (data.elem.checked) {
                        showArr.push(data.value)
                    } else {
                        removeWithoutCopy(showArr, data.value)
                    }
                    console.warn(showArr)
                });
                form.on('checkbox(showWTF)', function (data) {
                    if (data.elem.checked) {
                        showArr.push(data.value)
                    } else {
                        removeWithoutCopy(showArr, data.value)
                    }
                    console.warn(showArr)
                });

            }
        });
    })

    // showSetting();


    function showSetting() {

    }


</script>
</html>